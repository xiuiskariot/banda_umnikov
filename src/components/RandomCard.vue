<template>
  <div class="card">
    <div class="pic">
      <img v-if="cafe.photo" :src="cafe.photo" alt="" />
      <img v-else src="../assets/istockphoto-697965658-612x612.jpg" alt="" />
    </div>

    <div class="card_info">
      <p class="card_info_name">{{ cafe.name }}</p>

      <div class="card_info_cuisine">
        <p>–ö—É—Ö–Ω—è:&nbsp;</p>
        <div v-if="cafe.cuisine">{{ cafe.cuisine }}</div>
        <div v-else>–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ :—Å</div>
      </div>

      <div class="card_info_lunch">
        <div v-if="cafe.business_lunch">
          –ë–∏–∑–Ω–µ—Å-–ª–∞–Ω—á —Å—Ç–æ–∏—Ç {{ cafe.price }} —Ä
        </div>
        <div v-else>–ë–∏–∑–Ω–µ—Å-–ª–∞–Ω—á–∞ –Ω–µ—Ç</div>
      </div>

      <div>
        <div v-if="cafe.address">
          <p>üìç{{ cafe.address }}</p>
          <p style="margin-bottom: 7px">{{ cafe.landmark }}</p>
          <p>‚è± –∏–¥—Ç–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ –º–∏–Ω—É—Ç {{ cafe.time }} ({{ cafe.distance }} –º)</p>
        </div>
      </div>
      <button @click="fetchRandom">–ú–Ω–µ –ø–æ–≤–µ–∑–µ—Ç</button>
    </div>
  </div>
</template>
<script>
import axios from "axios";


export default {
  data() {
    return {
      cafe: {},
    };
  },
  methods: {
    async fetchRandom() {
      const response1 = await axios.get(
        "https://bandaumnikov.ru/api/test/site/get-index"
      );
      const dataLength = response1.data.data.dataLength;
      const randomId = Math.floor(Math.random() * dataLength);

      const response2 = await axios.get(`https://bandaumnikov.ru/api/test/site/get-view?id=${randomId}`)

      this.cafe = response2.data.data
    },
    mounted() {
      this.fetchRandom()
    },
  },
};
</script>
